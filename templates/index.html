<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SCADA System - Plant Overview</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
  <!-- Title Bar -->
  <div class="titlebar" role="banner" aria-label="Application title">
    <div class="left">
      <div class="system-icon" aria-hidden="true"></div>
      <span>SCADA System v2.1 - Plant Overview</span>
    </div>
    <div>Station: OFFICE-01 | Node: LOCAL</div>
  </div>

  <!-- Toolbar -->
  <div class="toolbar" role="navigation" aria-label="Main toolbar">
    <button class="toolbar-btn" data-popup="Overview">Overview</button>
    <button class="toolbar-btn" data-popup="Trends">Trends</button>
    <button class="toolbar-btn" data-popup="Alarms">Alarms</button>
    <button class="toolbar-btn" data-popup="Reports">Reports</button>
    <div class="toolbar-sep" aria-hidden="true"></div>
    <button class="toolbar-btn" data-popup="Config">Config</button>
    <button class="toolbar-btn" data-popup="Manual">Manual</button>
  </div>

  <!-- Main Container -->
  <div class="container" role="main">
    <!-- Trend Display -->
    <div class="panel wide">
      <div class="panel-title">24-Hour Trend - CO2/Temperature</div>
      <div class="panel-body">
        <div class="trend-chart" role="img" aria-label="CO2/Temperature trend (demo)">
          <div class="trend-grid" aria-hidden="true"></div>
          <canvas id="trend-canvas"></canvas>
        </div>
      </div>
    </div>

    <!-- Environmental Sensors -->
    <div class="panel">
      <div class="panel-title">
        <span>Environmental Monitor - Office</span>
        <span style="font-size: 9px;">LIVE | <a href="https://www.dropbop.xyz/api/sensor?device=office&hours=24" style="color: inherit;">RAW</a></span>
      </div>
      <div class="panel-body">
        <div class="sensor-grid">
          <div class="sensor" aria-live="polite">
            <div class="sensor-label">CO2 Level</div>
            <div class="sensor-value">
              <span id="co2">----</span>
              <span class="sensor-unit">ppm</span>
            </div>
          </div>
          <div class="sensor" aria-live="polite">
            <div class="sensor-label">Temperature</div>
            <div class="sensor-value">
              <span id="temp">--.-</span>
              <span class="sensor-unit">Â°C</span>
            </div>
          </div>
          <div class="sensor" aria-live="polite">
            <div class="sensor-label">Humidity</div>
            <div class="sensor-value">
              <span id="humidity">--.-</span>
              <span class="sensor-unit">%RH</span>
            </div>
          </div>
          <div class="sensor">
            <div class="sensor-label">Last Update</div>
            <div class="sensor-value">
              <span id="last-update">--</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- System Status -->
    <div class="panel">
      <div class="panel-title">System Status</div>
      <div class="panel-body">
        <div class="led-panel">
          <div class="led-group" aria-label="COMM status">
            <div class="led green-on" aria-hidden="true"></div>
            <span class="led-label">COMM</span>
          </div>
          <div class="led-group" aria-label="ESP32 status">
            <div class="led" aria-hidden="true"></div>
            <span class="led-label">ESP32</span>
          </div>
          <div class="led-group" aria-label="AC-1 status">
            <div class="led yellow-on" aria-hidden="true"></div>
            <span class="led-label">AC-1</span>
          </div>
          <div class="led-group" aria-label="Alarm status">
            <div class="led" aria-hidden="true"></div>
            <span class="led-label">ALARM</span>
          </div>
          <div class="led-group" aria-label="WEB status">
            <div class="led green-on" aria-hidden="true"></div>
            <span class="led-label">WEB</span>
          </div>
          <div class="led-group" aria-label="DB status">
            <div class="led" aria-hidden="true"></div>
            <span class="led-label">DB</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Alarm Summary - Now Dynamic -->
    <div class="panel wide">
      <div class="panel-title">
        <span>Alarm Summary</span>
        <span style="font-size: 9px;">0 ACTIVE | <a href="https://www.dropbop.xyz/api/sensor/log?device=office&hours=24" style="color: inherit;">RAW</a></span>
      </div>
      <div class="panel-body">
        <div id="alarm-list" class="alarm-list" role="log" aria-live="polite">
          <div class="alarm-row normal">
            <span>--:--:--</span>
            <span>INFO</span>
            <span>Loading events...</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Simple Mimic -->
    <div class="panel">
      <div class="panel-title">AC Control Mimic</div>
      <div class="panel-body">
        <div class="mimic" aria-label="Process mimic (demo)">
          <div class="pipe h" style="top: 50px; left: 20px; width: 60px;"></div>
          <div class="pump running" style="top: 35px; left: 80px;">P1</div>
          <div class="pipe h" style="top: 50px; left: 110px; width: 60px;"></div>
          <div class="pipe v" style="top: 50px; left: 170px; height: 40px;"></div>
        </div>
      </div>
    </div>

    <!-- Project Access Panel -->
    <div class="panel">
      <div class="panel-title">Project Systems</div>
      <div class="panel-body">
        <div class="project-grid">
          <a href="https://allgasnobrakes.xyz/" class="project-btn">
            <div class="project-icon" aria-hidden="true"></div>
            <div>CAR PHOTOS</div>
            <div style="font-size: 8px; margin-top: 2px;">Portfolio</div>
          </a>
          <a href="https://github.com/dropbop" class="project-btn">
            <div class="project-icon" aria-hidden="true"></div>
            <div>GITHUB</div>
            <div style="font-size: 8px; margin-top: 2px;">Projects</div>
          </a>
          <a href="https://dropbop.github.io/WeatherVis/" class="project-btn">
            <div class="project-icon" aria-hidden="true"></div>
            <div>WEATHER</div>
            <div style="font-size: 8px; margin-top: 2px;">Visualization</div>
          </a>
          <a href="#" class="project-btn" style="opacity: 0.5; pointer-events: none;">
            <div class="project-icon" aria-hidden="true"></div>
            <div>TBD</div>
            <div style="font-size: 8px; margin-top: 2px;">Placeholder</div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Status Bar -->
  <div class="statusbar" role="contentinfo" aria-label="Status bar">
    <div class="status-field">Mode: RUN</div>
    <div class="status-field">User: OPERATOR</div>
    <div class="status-field">Scan: 1000ms</div>
    <div class="status-field status-time" id="clock">00:00:00</div>
  </div>

  <script src="/static/js/script.js" defer></script>
  <noscript>JavaScript required for live values & trend.</noscript>
</body>
</html>